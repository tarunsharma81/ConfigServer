company.Query= 	SELECT DISTINCT   KeyInstn   	INTO #tempCOS   	FROM   	( SELECT  KeyInstn   			    FROM ObjectViews.dbo.InstnCoverageScope WITH (NOLOCK) WHERE KeyInstnCoverageScope IN (259, 321,371,305)   		     UNION ALL   		     SELECT x14_0.KeyInstn   			    FROM ObjectViews..DocsFileCollectionRelation x14_0 WITH (NOLOCK)   			    WHERE x14_0.KeyDocRelationshipType = 4    	       ) AS A      	SELECT DISTINCT   KeyInstn   	INTO #tempMM   	FROM   	( SELECT  KeyInstn   			    FROM ObjectViews.dbo.InstnCoverageScope WITH (NOLOCK) WHERE KeyInstnCoverageScope IN (259, 321,371,305)      	       ) AS B      	SELECT    		rtrim(x0_0.KeyInstnCorpBest) as 'CompanyKeyInstn',   		x0_0.KeyStatEntity,   		coalesce(x4_0.ChildKeyInstn,x5_0.SubGroupChildKeyInstn,x6_0.CSChildKeyInstn) as 'CompanyChildKeyInstn'   	INTO #CompanyChildren   	FROM ObjectViews.dbo.InsuranceStatEntity x0_0   		INNER join ObjectViews.dbo.StatEntityAttributeCalc x1_0 with (nolock)   			ON ((x1_0.RegCurrentInsurance in (0, 1) and x1_0.StatEntityName is not NULL) and x0_0.KeyStatEntity = x1_0.KeyStatEntity)   		INNER join ObjectViews.dbo.LookupNAICFilerType x0_1 with (nolock)   			ON x0_0.KeyNAICFilerType = x0_1.KeyNAICFilerType   		INNER join ObjectViews.dbo.Instn x2_0 with (nolock)   			on x0_0.KeyInstnCorpBest = x2_0.KeyInstn   		LEFT JOIN Objectviews.dbo.Fndg x3_0 with (nolock)   			on x2_0.KeyInstn = x3_0.KeyInstn    				AND (x3_0.PrimaryIssue = 1 OR x3_0.FndgStats = 1)   				AND x3_0.FndgCurrent = 1   				AND x3_0.TradedIssue = 1   		cross apply (   			select distinct convert(varchar(max),c.KeyInstn) + ' '    			from ObjectViews.dbo.StatEntityAttributeCalc a   				inner join ObjectViews.dbo.InsuranceStatEntity d on a.KeyStatEntity = d.KeyStatEntity   				inner join ObjectViews.dbo.Instn c on d.KeyInstn = c.KeyInstn   			where a.KeyStatEntityGroup = x0_0.KeyStatEntity   			FOR XML Path('')   		) as x4_0(ChildKeyInstn)   		cross apply (   			select distinct convert(varchar(max),c.KeyInstn) + ' '    			from ObjectViews.dbo.StatEntityAttributeCalc a   				inner join ObjectViews.dbo.InsuranceStatEntity d on a.KeyStatEntity = d.KeyStatEntity   				inner join ObjectViews.dbo.Instn c on d.KeyInstn = c.KeyInstn   			where a.KeyStatEntitySubGroup = x0_0.KeyStatEntity   			FOR XML Path('')   		) as x5_0(SubGroupChildKeyInstn)   		cross apply (   			select distinct convert(varchar(max),c.KeyInstn) + ' '    			from ObjectViews.dbo.StatEntityAttributeCalc a   				inner join ObjectViews.dbo.InsuranceStatEntity d on a.KeyStatEntity = d.KeyStatEntity   				inner join ObjectViews.dbo.Instn c on d.KeyInstn = c.KeyInstn   			where a.KeyStatEntityCSGroup = x0_0.KeyStatEntity   			FOR XML Path('')   		) as x6_0(CSChildKeyInstn)   	where x0_0.KeyStatEntityType in (6)      	select distinct     	imph.KeyInstn   	into #CompanySponsorBacked   	from ObjectViews..InstnParentHistory imph   		inner join ObjectViews..Instn i with (nolock)   			on i.KeyInstn=imph.KeyInstn and i.KeyInstitutionType =3   		inner join ObjectViews..InstnInvestment ii with (nolock)   			on ii.KeyInstn=imph.KeyInstnParent and ii.KeyInvestmentFirmType=2   	where imph.KeyCompanyRelationshipType in (1,13)      	select DISTINCT  x.*, case when x99_0.KeyInstn is not null then 1 else 0 end as CompanySponsorBacked, 'db_all_company' AS _lw_data_source_s, 'mi-search-all' AS _lw_data_source_collection_s   	from	   	       (   		     SELECT   			  x0_0.UpdDate,   			 'Company' AS 'EntityType',   			'all, companies, assets, default_collection, imdata, interactive' AS 'Catalogs',   			'Companies' AS 'ContentSet',   			1 AS 'ContentId',   			CASE   				WHEN x2_0.PrimaryIssue = 1   					THEN 'Primary'   				ELSE ''   			END AS 'Primary',   			x0_0.InstnName41 +    						CASE    							WHEN x2_0.TradingSymbolExchange IS NOT NULL   								THEN ' (' + RTRIM(x2_0.TradingSymbolExchange) + ')'   					when x16_0.KeyMIIndustryTree is not null and x0_0.KeyInstitutionStatus not in (3,4) then '(Operating)'   					when x16_0.KeyMIIndustryTree is not null and x0_0.KeyInstitutionStatus in (3,4) then '(Historical)'   					when x16_0.KeyMIIndustryTree is null and x0_0.InstnCurrent in (0,1) and (x0_0.RegCurrent IN (0,-1) OR x0_0.RegCurrentEnergy IN (0,-1) OR x0_0.IndLeadCurrentMedia IN (0,-1) OR x0_0.IndLeadCurrent IN (0,-1) OR x0_0.RegCurrentInsurance IN (0,-1) OR x0_0.IFRSCurrent IN (0,-1)) then '(Historical)'   							WHEN (   								x0_0.InstnCurrent IN (1) AND    								(          									x0_0.GAAPCurrent IN (1,2) OR   									(   										x0_0.RegCurrent IN (1,2) OR x0_0.RegCurrentEnergy IN (1,2)   										OR x0_0.IndLeadCurrentMedia IN (1,2) OR x0_0.IndLeadCurrent IN (1,2)   										OR x0_0.RegCurrentInsurance IN (1,2) OR x0_0.IFRSCurrent IN (1,2) OR x0_0.KeyInstitutionStatus in (0,1)   									)   								)   							)   								THEN '(Operating)'   						Else ''   						END     					+ ' : Corporate Profile' AS 'PageTitle',   			CASE    				WHEN x8_0.KeyStatEntityType IN (5,6)    					THEN 'company/profile?id='+ RTRIM(x0_0.KeyInstn) +'&keystatentity=' + RTRIM(x8_0.KeyStatEntity)    				ELSE 'company/profile?id='+ RTRIM(x0_0.KeyInstn)    			END AS 'Url',   			'/interactivex/snapshot.aspx?id=' + RTRIM(x0_0.KeyInstn) AS 'LegacyUrl',   			'' AS 'CrawlUrl',   			CASE    				WHEN x8_0.KeyStatEntityType IN (5,6)    				THEN 'company_' + RTRIM(x0_0.KeyInstn) + '_' +RTRIM(x8_0.KeyStatEntity)    				ELSE 'company_' + RTRIM(x0_0.KeyInstn)    			END AS id,   			CASE    				WHEN x8_0.KeyStatEntityType IN (5,6)    					THEN x9_0.StatEntityName    				ELSE x0_0.InstnName    			END AS'CompanyName',   			(   			    SELECT RTRIM(l.InstnName) + ' ' AS 'text()'   			    FROM   ObjectViews.dbo.Instn i WITH (NOLOCK)    					LEFT JOIN ObjectViews..LanguageInstn l WITH (NOLOCK) ON l.keyinstn = i.keyinstn   			    WHERE  x0_0.KeyInstn = i.keyinstn   			    FOR XML PATH(''),TYPE   					).value('.[1]', 'nvarchar(max)') AS 'CompanyLangName',   			x0_0.KeyGeographyTree,   			x0_7.StateName AS 'State',   			x0_7.KeyState As 'StateKey',   			COALESCE (x0_0.City,x0_0.ForeignProvince) AS 'Province',   			x0_8.CountryShortName AS 'Country',    			CASE    						WHEN (x0_7.StateName IS NOT NULL)    							THEN x0_7.StateName    			    ELSE ''    			END  +    						CASE    							WHEN (x0_8.CountryShortName IS NOT NULL)    								THEN x0_8.CountryShortName    			END AS 'StateCountry',   			x0_8.KeyCountry AS 'CountryKey',   			(   				SELECT RTRIM(l.KeyForeignLanguage) + ' ' AS 'text()'   				FROM   ObjectViews.dbo.Instn i WITH (NOLOCK)   				LEFT   JOIN ObjectViews..LanguageInstn l WITH (NOLOCK) ON l.keyinstn = i.keyinstn   				WHERE x0_0.KeyInstn = i.keyinstn FOR XML PATH(''),TYPE   					).value('.[1]', 'varchar(max)') AS 'CompanyKeyForeignLanguage',   			CASE    			    WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'Japan' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   				    THEN 'Japanese REITS, Japanese REIT, J-REITs, J-REIT, JREIT, JREITs'   			    WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'Australia' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   				    THEN 'Australian REITS, Australian REIT, A-REITs, A-REIT, AREIT, AREITs'   			    WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'United Kingdom' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   				    THEN 'UK REITS, UK REIT, UK-REITs, UK-REIT, UKREIT, UKREITs'   			    WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'Hong Kong' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   				    THEN 'Hong Kong REITS, Hong Kong REIT, HK-REITs, HK-REIT, HKREIT, HKREITs'   			    WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'Germany' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   				    THEN 'German REITS, German REIT, G-REITs, G-REIT, GREIT, GREITs'   			    WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'France' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   				    THEN 'French REITS, French REIT, SIIC, SIICs'   			    WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'Turkey' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   				    THEN 'Turkish REITS, Turkish REIT, REITS, REIT'   			    WHEN x0_0.KeyIndustryPrimaryRoot = 34  AND  x0_8.CountryShortName = 'Singapore' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   				    THEN 'Singapore REITS, Singapore REIT, S-REITs, S-REIT, SREIT, SREITs'   			    WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'Belgium' AND x0_0.InstnREIT = 1  AND x0_0.GAAPCurrent = 1   				    THEN 'Belgium REITS, Belgium REIT'   			    WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'South Africa' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   				    THEN  'South African REITS, South African REIT'   			    WHEN x0_0.KeyIndustryPrimaryRoot = 13 AND x0_8.CountryShortName = 'USA' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1    				    THEN 'US REITS, US REIT, US-REITs, US-REIT, USREIT, USREITs'   			    WHEN x0_0.KeyIndustryPrimaryRoot = 13 AND x0_8.CountryShortName = 'Canada' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   				    THEN 'Canadian REITS, Canadian REIT'   			    WHEN x0_0.KeyIndustryPrimaryRoot IN (13,34) AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   				    THEN 'REITS, REIT'   			    ELSE ''    			END AS 'CompanyAlias',   			CASE    						WHEN x8_0.KeyStatEntityType IN (5,6)    							THEN NULL    						ELSE x2_0.TradingSymbol    					END AS 'CompanyTradingSymbol',   			CASE    						WHEN x8_0.KeyStatEntityType IN (5,6)    							THEN NULL    						ELSE x2_0.TradingSymbolExchange    					END AS'CompanyTradingSymbolExchange',   			CASE    						WHEN x8_0.KeyStatEntityType IN (5,6)    							THEN NULL    						ELSE RTRIM(x6_0.ExhangeShortName)    					END AS'CompanyExchange',   					CASE    						WHEN x8_0.KeyStatEntityType IN (5,6)    							THEN NULL    						ELSE  x2_0.TradingSymbol + '-' + RTRIM(x6_0.ExhangeShortName)    					END AS 'CompanyTradingExchangeDisplay',   									CASE    						WHEN x8_0.KeyStatEntityType IN (5,6)    							THEN NULL    						ELSE  RTRIM(x6_0.ExhangeShortName) + ':' + x2_0.TradingSymbol   					END AS 'CompanyExchangeTradingDisplay',   					STUFF(   							(   								SELECT ',' + RTRIM(D.IndustryShortName)   								FROM ObjectViews.dbo.Instn ii    									JOIN ObjectViews.dbo.InstnMIIndustry c ON ii.KeyInstn = c.KeyInstn   									JOIN ObjectViews.dbo.LookUpMIIndustryTree  D ON c.KeyMIIndustryTree = d.KeyMIIndustryTree   								WHERE x0_0.KeyInstn = ii.keyinstn  and c.KeyIndustryRelationshipLevel in (0)  and c.KeyInstnIndustryStatus = 1 ORDER BY D.KeyMIIndustryTree    								FOR XML PATH(''),TYPE   							).value('.[1]', 'nvarchar(max)'), 1, 1, ''   					) AS 'IndustryName'    					,x0_1.GAAPDomainClass AS 'CompanyGAAPDomainClassName',   			x0_2.RegDomainClass AS 'CompanyRegDomainClassName',   			x0_3.IndLeadDomainClass AS 'CompanyIndLeadDomainClassName',   			x0_4.RegDomainClass AS 'CompanyRegDomainClassInsuranceName',   			x0_5.RegDomainClass AS 'CompanyRegDomainClassEnergyName',   			x6_7.IndleadDomainClass AS 'CompanyIndLeadDomainClassMedia',   			x6_8.IFRSDomainClass AS 'CompanyIFRSDomainClass',   					ISNULL(    						NULLIF(   							(    								SELECT DISTINCT RIGHT(REPLICATE('0', 2) + RTRIM(c.KeyIndustry), 2) + ' ' AS 'text()'   								FROM ObjectViews.dbo.Instn ii    								JOIN ObjectViews.dbo.Industry c ON    									(   										(c.MaskGAAPDomainClassCorrect & POWER(2, ii.KeyGAAPDomainClass) > 0   										OR c.MaskRegDomain & POWER(2, ii.KeyRegDomainClass) > 0   										OR c.MaskRegDomain & power(2, ii.KeyRegDomainClassEnergy) > 0   										OR c.MaskRegDomain & power(2, ii.KeyRegDomainClassInsurance) > 0   										OR c.MaskIndleadDomain & power(2, ii.KeyIndLeadDomainClass) > 0   										OR c.MaskIndleadDomain & power(2, ii.KeyIndLeadDomainClassMedia) > 0   										)   										AND c.KeyIndustry NOT IN (17,20,23,19,14,29,12,11,9,33,35)   									)    								WHERE x0_0.KeyInstn = ii.keyinstn FOR XML PATH(''),TYPE   							).value('.[1]', 'varchar(max)'),''   						),'16'    					) + ' 16' AS 'LegacyIndustry',   					ISNULL(    						NULLIF(   								(    									SELECT DISTINCT case when LEN(d.KeyMIIndustryTree) < 2 then '0'+rtrim(D.KeyMIIndustryTree) else rtrim(D.KeyMIIndustryTree) end + '   ' AS 'text()'   						FROM ObjectViews.dbo.Instn ii    									JOIN ObjectViews.dbo.InstnMIIndustry c ON ii.KeyInstn = c.KeyInstn   									JOIN ObjectViews.dbo.LookUpMIIndustryTree  D ON c.KeyMIIndustryTree = d.KeyMIIndustryTree   									WHERE x0_0.KeyInstn = ii.keyinstn  and c.KeyIndustryRelationshipLevel in (0,1)    									FOR XML PATH(''),TYPE   								).value('.[1]', 'varchar(max)'),''   						),'0'    					) + ' 0' AS Industry   					,case when x8_0.KeyStatEntityType in (5) then x9_0.NAICDerived else null end as 'NaicCode',   			x13_0.NAICGroup as 'NaicGroup',   			x3_0.SwiftBICCode as 'SwiftBicCode',   			x4_0.LegalEntityID as 'LeiCode',   			x0_0.KeyInstn as 'CompanySnlKeyInstn',   			x2_0.CUSIP as 'CompanyCUSIP',   					x2_0.ISIN as 'CompanyISIN',   			ii.CAFileNumber as 'CAFileNum',   			x5_0.TradingItemID AS 'CompanyTradingItemId',   			CASE    						WHEN x0_0.DateAcquired IS NULL    							THEN 'Not Acquired'    						ELSE 'Acquired'    					END AS 'AcquiredOrDefunct',   			CASE    						WHEN x2_0.TradingSymbol IS NULL    							THEN 'Private'    						ELSE 'Public'    					END AS 'PrivateORPublic',   			CASE    					when x16_0.KeyMIIndustryTree is not null and x0_0.KeyInstitutionStatus not in (3,4) then 'Operating'   					when x16_0.KeyMIIndustryTree is not null and x0_0.KeyInstitutionStatus in (3,4) then 'Historical'   					when x16_0.KeyMIIndustryTree is null and x0_0.InstnCurrent in (0,1) and (x0_0.RegCurrent IN (0,-1) OR x0_0.RegCurrentEnergy IN (0,-1) OR x0_0.IndLeadCurrentMedia IN (0,-1) OR x0_0.IndLeadCurrent IN (0,-1) OR x0_0.RegCurrentInsurance IN (0,-1) OR x0_0.IFRSCurrent IN (0,-1)) then 'Historical'         										    WHEN (   								x0_0.InstnCurrent IN (1) AND    								(    									x0_0.GAAPCurrent IN (1,2) OR    									(   										x0_0.RegCurrent IN (1,2) OR x0_0.RegCurrentEnergy IN (1,2)   										OR x0_0.IndLeadCurrentMedia IN (1,2) OR x0_0.IndLeadCurrent IN (1,2) OR x0_0.RegCurrentInsurance IN (1,2)    										OR x0_0.IFRSCurrent IN (1,2)   									)   								)   						)   							THEN 'Operating'    						WHEN  (     								x0_0.InstnCurrent IN (1) AND    								(   									x0_0.GAAPCurrent IS NULL AND    									(   										x0_0.RegCurrent IS NULL AND x0_0.RegCurrentEnergy IS NULL   										AND x0_0.IndLeadCurrentMedia IS NULL AND x0_0.IndLeadCurrent IS NULL AND x0_0.RegCurrentInsurance IS NULL   										AND x0_0.IFRSCurrent IS NULL    									)   								)   						)    							THEN 'Operating'   			    ELSE 'Unknown'    					END as 'OperatingStatus',   			x7_0.InstnText,   			x0_0.InstnName41 AS CompanyInstnName41,   			x0_0.ShortName AS CompanyShortName,   			x10_0.CIQCompanyID as CIQCompanyID,   			x9_0.StatEntityNameAccentIns as SNLGroupName,   			x0_0.Cert as FDICCertNumber,   			x0_0.ProductRegID as RegID,   			x0_0.KeyInstitutionType as 'CompanyType',   			x11_0.MarketCapFinl,   			null AS 'MarketCapFinlAVGRaw',   			null as 'MarketCapFinlCurrencyTranslation',   			x5_0.KeyUniversalEntity,   			CASE    				WHEN (coalesce(x0_0.updoperation,0) < 2 and coalesce(x5_0.updoperation,0) < 2 and coalesce(x16_0.updoperation,0) < 2 and coalesce(x2_0.updoperation,0) < 2 and coalesce(x8_0.updoperation,0) < 2 and coalesce(x9_0.updoperation,0) < 2) THEN 'add'   				WHEN (x0_0.updoperation = 2 or x5_0.updoperation = 2 or x16_0.updoperation = 2 or x2_0.updoperation = 2 or x8_0.updoperation = 2 or x9_0.updoperation = 2) THEN 'delete'   			END AS 'Action',   			'db_all_company' AS Source   			,ii.FinancialHoldingCompany   			, x0_0.KeyInstitutionStatus   			,'0' as IndustryExempt   			,x0_0.KeyInstnParent as 'CompanySnlKeyInstnParent'   			,case when isnull(x0_0.KeyInstnParent,1) = 1 then '0' else '1' end as CompanyHasParent   			,x20_0.CompanyChildKeyInstn   					,x8_0.KeyStatEntityType as CompanyKeyStatEntityType   		     FROM [ObjectViews].dbo.D_Instn x0_0    					LEFT JOIN [ObjectViews].dbo.GAAPDomainClass x0_1 WITH (NOLOCK)     						ON x0_1.KeySNLDomainClass = x0_0.KeyGAAPDomainClass   					LEFT JOIN [ObjectViews].dbo.LookupRegDomainClass x0_2 WITH (NOLOCK)     						ON x0_2.KeySNLDomainClass = x0_0.KeyRegDomainClass   					LEFT JOIN [ObjectViews].dbo.LookupIndLeadDomainClass x0_3 WITH (NOLOCK)     						ON x0_3.KeySNLDomainClass =x0_0.keyIndLeadDomainClass   					LEFT JOIN [ObjectViews].dbo.LookupRegDomainClass x0_4 WITH (NOLOCK)     						ON x0_4.KeySNLDomainClass =x0_0.KeyRegDomainClassInsurance   					LEFT JOIN [ObjectViews].dbo.LookupRegDomainClass x0_5 WITH (NOLOCK)     						ON x0_5.KeySNLDomainClass = x0_0.KeyRegDomainClassEnergy   					LEFT JOIN [ObjectViews].dbo.LookupIndLeadDomainClass x6_7 WITH (NOLOCK)     						ON x6_7.KeySNLDomainClass =x0_0.KeyIndLeadDomainClassMedia   					LEFT JOIN [ObjectViews].dbo.LookupIFRSDomainClass x6_8 WITH (NOLOCK)     						ON x6_8.KeyIFRSDomainClass = x0_0.KeyIFRSDomainClass   					LEFT JOIN [ObjectViews].dbo.Industry x3_1 WITH (NOLOCK)     						ON x3_1.keyindustry = x0_0.KeyIndustryPrimaryRoot   					LEFT JOIN [ObjectViews].dbo.STATE x0_7 WITH (NOLOCK)     						ON x0_7.KeyState = x0_0.STATE   					LEFT JOIN [ObjectViews].dbo.Country x0_8 WITH (NOLOCK)     						ON x0_8.KeyCountry = x0_0.Country   					LEFT JOIN [ObjectViews].dbo.D_Fndg x2_0 WITH (NOLOCK)   						ON x2_0.keyinstn = x0_0.keyinstn AND (x2_0.PrimaryIssue = 1 OR x2_0.FndgStats = 1) AND x2_0.FndgCurrent = 1 AND x2_0.TradedIssue = 1   						AND x2_0.UpdOperation <2   					LEFT JOIN [ObjectViews].dbo.InstnSwiftBIC x3_0 WITH (NOLOCK)    						ON x3_0.keyinstn = x0_0.keyinstn   					LEFT JOIN [ObjectViews].dbo.CalcsInstnAttribute x4_0 WITH (NOLOCK)    						ON x4_0.keyinstn = x0_0.keyinstn   					LEFT JOIN ObjectViews.dbo.Instn ii WITH (NOLOCK)     						ON ii.KeyInstn = x0_0.KeyInstn   					LEFT JOIN ObjectViews.dbo.D_ProductPriceEntInstrument x5_0 WITH (NOLOCK)    						ON x5_0.KeyInstn = x0_0.KeyInstn AND x5_0.KeyUniversalEntityType = 2   					LEFT JOIN ObjectViews..LookupExchange x6_0 WITH (NOLOCK)    						ON x2_0.KeyExchange = x6_0.KeyExchange   					LEFT JOIN ObjectViews..InstnText x7_0 WITH (NOLOCK)    						ON x0_0.KeyInstn = x7_0.KeyInstn   					INNER JOIN ObjectViews.dbo.D_InsuranceStatEntity x8_0 WITH (NOLOCK)    						ON x8_0.KeyInstn = x0_0.KeyInstn AND x8_0.KeyStatEntityType IN (5,6) AND x5_0.KeyStatEntity = x8_0.KeyStatEntity   					INNER JOIN ObjectViews.dbo.D_StatEntityAttributeCalc x9_0 WITH (NOLOCK)    						ON (   								(x9_0.RegCurrentInsurance IN (0,1) AND x9_0.StatEntityName IS NOT NULL)   								AND x8_0.KeyStatEntity =x9_0.KeyStatEntity   							)   					LEFT JOIN ObjectViews.dbo.CapIQCompanyID2Instn x10_0 WITH (NOLOCK)    						ON x0_0.KeyInstn = x10_0.KeyInstn AND x10_0.PrimaryMapping= 1   					LEFT JOIN ObjectViews.dbo.FndgPricingStat x11_0 WITH (NOLOCK)    						ON x2_0.KeyFndg = x11_0.KeyFndg AND x11_0.UseIntradayPricing =0 AND DATEADD(DAY,-1,CONVERT(date,GETDATE())) = x11_0.PricingAsOf   					LEFT JOIN ObjectViews.dbo.InstnInsuranceStatLOB x12_0 WITH (NOLOCK)    						ON x0_0.KeyInstn = x12_0.KeyInstn   					LEFT JOIN ObjectViews.dbo.FinlLenderOrigination x13_0 WITH (NOLOCK)    						ON x0_0.KeyInstn = x13_0.KeyInstn and x13_0.MostRecentSequence = 1   					LEFT JOIN ObjectViews.dbo.InstnInvestment x15_0 WITH (NOLOCK)   						ON x0_0.KeyInstn = x15_0.KeyInstn   					LEFT JOIN ObjectViews.dbo.D_InstnMIIndustry x16_0 with (nolock)   						On x0_0.KeyInstn = x16_0.KeyInstn   					LEFT JOIN #CompanyChildren x20_0 with (nolock)   						ON x0_0.KeyInstn = x20_0.CompanyKeyInstn and x9_0.KeyStatEntity = x20_0.KeyStatEntity   					CROSS APPLY (   						Select convert(varchar(max),convert(decimal(20,2),ab.MarketCapFinl)) + ' ' as 'text()'    							from [ObjectViews].dbo.Fndg fg    								Left Join ObjectViews.dbo.FndgPricingStat ab On  ab.KeyFndg = fg.KeyFndg AND ab.MarketCapFinl is not null    							where x0_0.KeyInstn = fg.keyinstn  and ab.MarketCapFinl is not null   							FOR XML PATH('')   					) as x17_0(MarketCapFinls)   					CROSS APPLY (   						Select convert(varchar(max),convert(decimal(10,4),(select CurrencyTranslationRate from ObjectViews.dbo.CalcsCurrencyTranslation pct where fg.KeyCurrency = pct.KeyCurrencyFrom and ab.PricingAsOf = pct.CurrencyTranslationAsOf and ab.PricingAsOf = pct.CurrencyTranslationAsOfBegin and pct.KeyCurrency='USD'))) + ' '  as 'text()'    							from [ObjectViews].dbo.Fndg fg    								Left Join ObjectViews.dbo.FndgPricingStat ab On  ab.KeyFndg = fg.KeyFndg AND ab.MarketCapFinl is not null    							where x0_0.KeyInstn = fg.keyinstn  and ab.MarketCapFinl is not null   							FOR XML PATH('')   					) as x18_0(MarketCapFinlCurrencyTranslation)   				WHERE x0_0.KeyInstn BETWEEN ? AND ?   		    UNION ALL      				SELECT   x0_0.UpdDate,   					'Company'AS 'EntityType',   			'all, companies, assets, default_collection, imdata, interactive' AS 'Catalogs',   			'Companies' AS 'ContentSet',   			1 AS 'ContentId',   			CASE WHEN x2_0.PrimaryIssue = 1 THEN 'Primary' ELSE '' END AS 'Primary',   			x0_0.InstnName41 +     						CASE    							WHEN x2_0.TradingSymbolExchange IS NOT NULL    									THEN ' (' + RTRIM(x2_0.TradingSymbolExchange) + ')'    							when x16_0.KeyMIIndustrytree is not null and x0_0.KeyInstitutionStatus not in (3,4) then '(Operating)'   							when x16_0.KeyMIIndustryTree is not null and x0_0.KeyInstitutionStatus in (3,4) then '(Historical)'   							when x16_0.KeyMIIndustryTree is null and x0_0.InstnCurrent in (0,1) and (x0_0.RegCurrent IN (0,-1) OR x0_0.RegCurrentEnergy IN (0,-1) OR x0_0.IndLeadCurrentMedia IN (0,-1) OR x0_0.IndLeadCurrent IN (0,-1) OR x0_0.RegCurrentInsurance IN (0,-1) OR x0_0.IFRSCurrent IN (0,-1)) then '(Historical)'   							WHEN (   									x0_0.InstnCurrent IN (1) AND    									(    										x0_0.GAAPCurrent IN (1,2) OR    										(   											x0_0.RegCurrent IN (1,2) OR x0_0.RegCurrentEnergy IN (1,2)   											OR x0_0.IndLeadCurrentMedia IN (1,2) OR x0_0.IndLeadCurrent IN (1,2)   											OR x0_0.RegCurrentInsurance IN (1,2) OR x0_0.IFRSCurrent IN (1,2) OR x0_0.KeyInstitutionStatus in (0,1)   										)    									)   							)    							THEN '(Operating)'    							ELSE ''   						END    					+ ' : Corporate Profile' AS 'PageTitle' ,   			'company/profile?id='+ RTRIM(x0_0.KeyInstn) AS 'Url',   			'/interactivex/snapshot.aspx?id=' + RTRIM(x0_0.KeyInstn) AS 'LegacyUrl',   			'' AS 'CrawlUrl',   			'company_' + RTRIM(x0_0.KeyInstn) AS id,   			x0_0.InstnName AS 'CompanyName',   			(    						SELECT RTRIM(l.InstnName) + ' ' AS 'text()'    						FROM ObjectViews.dbo.Instn i     				LEFT JOIN ObjectViews..LanguageInstn l WITH (NOLOCK)     								ON l.keyinstn = i.keyinstn   			    WHERE x0_0.KeyInstn = i.keyinstn FOR XML PATH(''),TYPE   					).value('.[1]', 'nvarchar(max)') AS 'CompanyLangName',   			x0_0.KeyGeographyTree,   			x0_7.StateName AS 'State',   			x0_7.KeyState As 'StateKey',   			COALESCE (x0_0.City,x0_0.ForeignProvince) AS 'Province',   			x0_8.CountryShortName AS 'Country',   			CASE    						WHEN (x0_7.StateName IS NOT NULL)    							THEN x0_7.StateName    						ELSE ''    					END +   						CASE    							WHEN (x0_8.CountryShortName IS NOT NULL)    								THEN x0_8.CountryShortName    						END    					AS 'StateCountry',   			x0_8.KeyCountry AS 'CountryKey',   			(   						SELECT RTRIM(l.KeyForeignLanguage) + ' ' AS 'text()'    						FROM ObjectViews.dbo.Instn i   			    LEFT JOIN ObjectViews..LanguageInstn l WITH (NOLOCK)    							ON l.keyinstn = i.keyinstn    						WHERE x0_0.KeyInstn = i.keyinstn    			    FOR XML PATH(''),TYPE   					).value('.[1]', 'varchar(max)' ) AS 'CompanyKeyForeignLanguage',   			CASE    						WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'Japan' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   				    THEN 'Japanese REITS, Japanese REIT, J-REITs, J-REIT, JREIT, JREITs'   			    WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'Australia' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   				    THEN 'Australian REITS, Australian REIT, A-REITs, A-REIT, AREIT, AREITs'   			    WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'United Kingdom' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   				    THEN 'UK REITS, UK REIT, UK-REITs, UK-REIT, UKREIT, UKREITs'   			    WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'Hong Kong' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   				    THEN 'Hong Kong REITS, Hong Kong REIT, HK-REITs, HK-REIT, HKREIT, HKREITs'   			    WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'Germany' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   				    THEN 'German REITS, German REIT, G-REITs, G-REIT, GREIT, GREITs'   			    WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'France' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   				    THEN 'French REITS, French REIT, SIIC, SIICs'   			    WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'Turkey' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   				    THEN 'Turkish REITS, Turkish REIT, REITS, REIT'   			    WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'Singapore' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   				    THEN 'Singapore REITS, Singapore REIT, S-REITs, S-REIT, SREIT, SREITs'   			    WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'Belgium' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1    				    THEN 'Belgium REITS, Belgium REIT'   			    WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'South Africa' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   				    THEN 'South African REITS, South African REIT'   			    WHEN x0_0.KeyIndustryPrimaryRoot = 13 AND x0_8.CountryShortName = 'USA' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   				    THEN 'US REITS, US REIT, US-REITs, US-REIT, USREIT, USREITs'   			    WHEN x0_0.KeyIndustryPrimaryRoot = 13 AND x0_8.CountryShortName = 'Canada' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   				    THEN 'Canadian REITS, Canadian REIT'   			    WHEN x0_0.KeyIndustryPrimaryRoot IN (13,34) AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1    				    THEN 'REITS, REIT'    			    ELSE ''   					END AS 'CompanyAlias',   			x2_0.TradingSymbol AS 'CompanyTradingSymbol',   			x2_0.TradingSymbolExchange AS 'CompanyTradingSymbolExchange',   			RTRIM(x6_0.ExhangeShortName) AS 'CompanyExchange',   					x2_0.TradingSymbol + '-' +  RTRIM(x6_0.ExhangeShortName) AS 'CompanyTradingExchangeDisplay',   									RTRIM(x6_0.ExhangeShortName) + ':' + x2_0.TradingSymbol  AS 'CompanyExchangeTradingDisplay',   					STUFF(   							(   								SELECT ',' + RTRIM(D.IndustryShortName)   								FROM ObjectViews.dbo.Instn ii    									JOIN ObjectViews.dbo.InstnMIIndustry c ON ii.KeyInstn = c.KeyInstn   									JOIN ObjectViews.dbo.LookUpMIIndustryTree  D ON c.KeyMIIndustryTree = d.KeyMIIndustryTree   								WHERE x0_0.KeyInstn = ii.keyinstn  and c.KeyIndustryRelationshipLevel in (0) and c.KeyInstnIndustryStatus = 1 ORDER BY D.KeyMIIndustryTree    								FOR XML PATH(''),TYPE   							).value('.[1]', 'nvarchar(max)'), 1, 1, ''   					) AS 'IndustryName'    					,x0_1.GAAPDomainClass AS 'CompanyGAAPDomainClassName',   			x0_2.RegDomainClass AS 'CompanyRegDomainClassName',   			x0_3.IndLeadDomainClass AS 'CompanyIndLeadDomainClassName',   			x0_4.RegDomainClass AS 'CompanyRegDomainClassInsuranceName',   			x0_5.RegDomainClass AS 'CompanyRegDomainClassEnergyName',   			x6_7.IndleadDomainClass AS 'CompanyIndLeadDomainClassMedia',   			x6_8.IFRSDomainClass AS 'CompanyIFRSDomainClass',   					ISNULL(    						NULLIF(   							(    								SELECT DISTINCT RIGHT(REPLICATE('0', 2) + RTRIM(c.KeyIndustry), 2) + ' ' AS 'text()'   								FROM ObjectViews.dbo.Instn ii    								JOIN ObjectViews.dbo.Industry c ON    									(   										(c.MaskGAAPDomainClassCorrect & POWER(2, ii.KeyGAAPDomainClass) > 0   										OR c.MaskRegDomain & POWER(2, ii.KeyRegDomainClass) > 0   										OR c.MaskRegDomain & power(2, ii.KeyRegDomainClassEnergy) > 0   										OR c.MaskRegDomain & power(2, ii.KeyRegDomainClassInsurance) > 0   										OR c.MaskIndleadDomain & power(2, ii.KeyIndLeadDomainClass) > 0   										OR c.MaskIndleadDomain & power(2, ii.KeyIndLeadDomainClassMedia) > 0   										)   										AND c.KeyIndustry NOT IN (17,20,23,19,14,29,12,11,9,33,35)   									)    								WHERE x0_0.KeyInstn = ii.keyinstn FOR XML PATH(''),TYPE   							).value('.[1]', 'varchar(max)'),''   						),'16'    					) + ' 16' AS 'LegacyIndustry',   					ISNULL(    						NULLIF(   								(    									SELECT DISTINCT case when LEN(d.KeyMIIndustryTree) < 2 then '0'+rtrim(D.KeyMIIndustryTree) else rtrim(D.KeyMIIndustryTree) end + '   ' AS 'text()'   						FROM ObjectViews.dbo.Instn ii    									JOIN ObjectViews.dbo.InstnMIIndustry c ON ii.KeyInstn = c.KeyInstn   									JOIN ObjectViews.dbo.LookUpMIIndustryTree  D ON c.KeyMIIndustryTree = d.KeyMIIndustryTree   									WHERE x0_0.KeyInstn = ii.keyinstn  and c.KeyIndustryRelationshipLevel in (0,1)    									FOR XML PATH(''),TYPE   								).value('.[1]', 'varchar(max)'),''   						),'0'    					) + ' 0 ' AS Industry,   					x12_0.NAIC as 'NaicCode',   					x13_0.NAICGroup as 'NaicGroup',   					x3_0.SwiftBICCode as 'SwiftBicCode',   					x4_0.LegalEntityID as 'LeiCode',   					x0_0.KeyInstn as 'CompanySnlKeyInstn',   					x2_0.CUSIP as 'CompanyCUSIP',   					x2_0.ISIN as 'CompanyISIN',   					ii.CAFileNumber as 'CAFileNum',   					x5_0.TradingItemID AS 'CompanyTradingItemId',   			CASE    						WHEN x0_0.DateAcquired IS NULL    							THEN 'Not Acquired'    						ELSE 'Acquired'    					END AS 'AcquiredOrDefunct',   			CASE    						WHEN x2_0.TradingSymbol IS NULL    							THEN 'Private'    						ELSE 'Public'    					END AS 'PrivateORPublic',   			CASE    					when x16_0.KeyMIIndustryTree is not null and x0_0.KeyInstitutionStatus not in (3,4) then 'Operating'   					when x16_0.KeyMIIndustryTree is not null and x0_0.KeyInstitutionStatus in (3,4) then 'Historical'   					when x16_0.KeyMIIndustryTree is null and x0_0.InstnCurrent in (0,1) and (x0_0.RegCurrent IN (0,-1) OR x0_0.RegCurrentEnergy IN (0,-1) OR x0_0.IndLeadCurrentMedia IN (0,-1) OR x0_0.IndLeadCurrent IN (0,-1) OR x0_0.RegCurrentInsurance IN (0,-1) OR x0_0.IFRSCurrent IN (0,-1)) then 'Historical'   						WHEN (   								x0_0.InstnCurrent IN (1) AND    								(    									x0_0.GAAPCurrent IN (1,2) OR    									(    										x0_0.RegCurrent IN (1,2) OR x0_0.RegCurrentEnergy IN (1,2)   										OR x0_0.IndLeadCurrentMedia IN (1,2) OR x0_0.IndLeadCurrent IN (1,2) OR x0_0.RegCurrentInsurance IN (1,2)    										OR x0_0.IFRSCurrent IN (1,2) OR x0_0.KeyInstitutionStatus in (0,1)   									)   								)   						)   			    THEN 'Operating'   					WHEN  (     							x0_0.InstnCurrent IN (1) AND    							(    								x0_0.GAAPCurrent IS NULL AND    								(   									x0_0.RegCurrent IS NULL AND x0_0.RegCurrentEnergy IS NULL   									AND x0_0.IndLeadCurrentMedia IS NULL AND x0_0.IndLeadCurrent IS NULL AND x0_0.RegCurrentInsurance IS NULL   									AND x0_0.IFRSCurrent IS NULL    								)   							)   					)    						THEN 'Operating'   					ELSE 'Unknown'    				END as 'OperatingStatus',   		    x7_0.InstnText,   		    x0_0.InstnName41 AS CompanyInstnName41,   		    x0_0.ShortName AS CompanyShortName,   		    x10_0.CIQCompanyID as CIQCompanyID,   		    NULL as SNLGroupName,   		    x0_0.Cert as FDICCertNumber,   		    x0_0.ProductRegID as RegID,   		    x0_0.KeyInstitutionType as 'CompanyType',   		    x11_0.MarketCapFinl,   				x17_0.MarketCapFinls AS 'MarketCapFinlAVGRaw',   				x18_0.MarketCapFinlCurrencyTranslation as 'MarketCapFinlCurrencyTranslation',   				x5_0.KeyUniversalEntity,   		    CASE    					WHEN (x0_0.updoperation < 2)    						THEN 'add'    					WHEN (x0_0.updoperation = 2)    						THEN 'delete'    				END AS 'Action'   		    ,'db_all_company' AS Source   				,ii.FinancialHoldingCompany   				, x0_0.KeyInstitutionStatus   							,'0' as IndustryExempt   							,x0_0.KeyInstnParent as 'CompanySnlKeyInstnParent'   							,case when isnull(x0_0.KeyInstnParent,1) = 1 then '0' else '1' end as CompanyHasParent   							, '' as 'CompanyChildKeyInstn'   													, '' as CompanyKeyStatEntityType   		FROM [ObjectViews].dbo.D_Instn x0_0    				LEFT JOIN [ObjectViews].dbo.GAAPDomainClass x0_1 WITH (NOLOCK)     					ON x0_1.KeySNLDomainClass = x0_0.KeyGAAPDomainClass   				LEFT JOIN [ObjectViews].dbo.LookupRegDomainClass x0_2 WITH (NOLOCK)     					ON x0_2.KeySNLDomainClass = x0_0.KeyRegDomainClass   				LEFT JOIN [ObjectViews].dbo.LookupIndLeadDomainClass x0_3 WITH (NOLOCK)     					ON x0_3.KeySNLDomainClass =x0_0.keyIndLeadDomainClass   				LEFT JOIN [ObjectViews].dbo.LookupRegDomainClass x0_4 WITH (NOLOCK)     					ON x0_4.KeySNLDomainClass =x0_0.KeyRegDomainClassInsurance   				LEFT JOIN [ObjectViews].dbo.LookupRegDomainClass x0_5 WITH (NOLOCK)     					ON x0_5.KeySNLDomainClass = x0_0.KeyRegDomainClassEnergy   				LEFT JOIN [ObjectViews].dbo.LookupIndLeadDomainClass x6_7  WITH (NOLOCK)    					ON x6_7.KeySNLDomainClass =x0_0.KeyIndLeadDomainClassMedia   				LEFT JOIN [ObjectViews].dbo.LookupIFRSDomainClass x6_8  WITH (NOLOCK)    					ON x6_8.KeyIFRSDomainClass = x0_0.KeyIFRSDomainClass   				LEFT JOIN [ObjectViews].dbo.Industry x3_1 WITH (NOLOCK)     					ON x3_1.keyindustry = x0_0.KeyIndustryPrimaryRoot   				LEFT JOIN [ObjectViews].dbo.STATE x0_7 WITH (NOLOCK)     					ON x0_7.KeyState = x0_0.STATE   				LEFT JOIN [ObjectViews].dbo.Country x0_8 WITH (NOLOCK)     					ON x0_8.KeyCountry = x0_0.Country   				LEFT JOIN [ObjectViews].dbo.D_Fndg x2_0 WITH (NOLOCK)    					ON x2_0.keyinstn = x0_0.keyinstn AND (x2_0.PrimaryIssue = 1 OR x2_0.FndgStats = 1) AND x2_0.FndgCurrent = 1 AND x2_0.TradedIssue = 1    					AND x2_0.UpdOperation <2   				LEFT JOIN [ObjectViews].dbo.InstnSwiftBIC x3_0 WITH (NOLOCK)    					ON x3_0.keyinstn = x0_0.keyinstn   				LEFT JOIN [ObjectViews].dbo.CalcsInstnAttribute x4_0 WITH (NOLOCK)    					ON x4_0.keyinstn = x0_0.keyinstn   				LEFT JOIN ObjectViews.dbo.Instn ii WITH (NOLOCK)     					ON ii.KeyInstn = x0_0.KeyInstn   				LEFT JOIN ObjectViews.dbo.D_ProductPriceEntInstrument x5_0 WITH (NOLOCK)    					ON x5_0.KeyInstn = x0_0.KeyInstn and cast (x5_0.keyinstn as varchar(50)) = x5_0.keyuniversalentity    				LEFT JOIN ObjectViews..LookupExchange x6_0 WITH (NOLOCK)    					ON x2_0.KeyExchange = x6_0.KeyExchange   				LEFT JOIN ObjectViews..InstnText x7_0 WITH (NOLOCK)    					ON x0_0.KeyInstn = x7_0.KeyInstn   				LEFT JOIN ObjectViews.dbo.CapIQCompanyID2Instn x10_0 WITH (NOLOCK)    					ON x0_0.KeyInstn = x10_0.KeyInstn AND x10_0.PrimaryMapping= 1   				LEFT JOIN ObjectViews.dbo.FndgPricingStat x11_0 WITH (NOLOCK)    					ON x2_0.KeyFndg = x11_0.KeyFndg AND x11_0.UseIntradayPricing =0 AND DATEADD(DAY,-1,CONVERT(date,GETDATE())) = x11_0.PricingAsOf   				LEFT JOIN ObjectViews.dbo.InstnInsuranceStatLOB x12_0 WITH (NOLOCK)    					ON x0_0.KeyInstn = x12_0.KeyInstn   				LEFT JOIN ObjectViews.dbo.FinlLenderOrigination x13_0 WITH (NOLOCK)    					ON x0_0.KeyInstn = x13_0.KeyInstn   				LEFT JOIN ObjectViews.dbo.InstnInvestment x15_0 WITH (NOLOCK)   					ON x0_0.KeyInstn = x15_0.KeyInstn   				LEFT JOIN ObjectViews.dbo.D_InstnMIIndustry x16_0 with (nolock)   					On x0_0.KeyInstn = x16_0.KeyInstn   				CROSS APPLY (   					Select convert(varchar(max),convert(decimal(20,2),ab.MarketCapFinl)) + ' ' as 'text()'    						from [ObjectViews].dbo.Fndg fg    							Left Join ObjectViews.dbo.FndgPricingStat ab with (nolock) On  ab.KeyFndg = fg.KeyFndg AND ab.MarketCapFinl is not null    						where x0_0.KeyInstn = fg.keyinstn  and ab.MarketCapFinl is not null   						FOR XML PATH('')   				) as x17_0(MarketCapFinls)   				CROSS APPLY (   					Select convert(varchar(max),convert(decimal(10,4),(select CurrencyTranslationRate from ObjectViews.dbo.CalcsCurrencyTranslation pct where fg.KeyCurrency = pct.KeyCurrencyFrom and ab.PricingAsOf = pct.CurrencyTranslationAsOf and ab.PricingAsOf = pct.CurrencyTranslationAsOfBegin and pct.KeyCurrency='USD'))) + ' '  as 'text()'    						from [ObjectViews].dbo.Fndg fg    							Left Join ObjectViews.dbo.FndgPricingStat ab with (nolock) On  ab.KeyFndg = fg.KeyFndg AND ab.MarketCapFinl is not null    						where x0_0.KeyInstn = fg.keyinstn  and ab.MarketCapFinl is not null   						FOR XML PATH('')   				) as x18_0(MarketCapFinlCurrencyTranslation)   		WHERE x0_0.KeyInstn BETWEEN ? AND ?      			UNION ALL      		SELECT		 x0_0.UpdDate,   				'Company' AS 'EntityType',   				'all, companies, assets, default_collection, imdata, interactive' AS 'Catalogs',   				'Companies' AS 'ContentSet',   				1 AS 'ContentId',   				CASE WHEN x2_0.PrimaryIssue = 1 THEN 'Primary'ELSE '' END AS 'Primary',   				x0_0.InstnName41 +    					CASE    						WHEN x2_0.TradingSymbolExchange IS NOT NULL   							THEN ' (' + RTRIM(x2_0.TradingSymbolExchange) + ')'   							when x16_0.KeyMIIndustryTree is not null and x0_0.KeyInstitutionStatus not in (3,4) then '(Operating)'   							when x16_0.KeyMIIndustryTree is not null and x0_0.KeyInstitutionStatus in (3,4) then '(Historical)'   							when x16_0.KeyMIIndustryTree is null and x0_0.InstnCurrent in (0,1) and (x0_0.RegCurrent IN (0,-1) OR x0_0.RegCurrentEnergy IN (0,-1) OR x0_0.IndLeadCurrentMedia IN (0,-1) OR x0_0.IndLeadCurrent IN (0,-1) OR x0_0.RegCurrentInsurance IN (0,-1) OR x0_0.IFRSCurrent IN (0,-1)) then '(Historical)'   						WHEN (   								x0_0.InstnCurrent IN (1) AND    								(   									x0_0.GAAPCurrent IN (1,2) OR    									(   										x0_0.RegCurrent IN (1,2) OR x0_0.RegCurrentEnergy IN (1,2)   										OR x0_0.IndLeadCurrentMedia IN (1,2) OR x0_0.IndLeadCurrent IN (1,2) OR x0_0.RegCurrentInsurance IN (1,2)   										OR x0_0.IFRSCurrent IN (1,2)  OR x0_0.KeyInstitutionStatus in (0,1)   									)   								)   						)   							THEN '(Operating)'    						WHEN (   								x0_0.InstnCurrent IN (0) AND    								(   									x0_0.GAAPCurrent IN (0) OR    									(   										x0_0.RegCurrent IN (0) OR x0_0.RegCurrentEnergy IN (0)    										OR x0_0.IndLeadCurrentMedia IN (0) OR x0_0.IndLeadCurrent IN (0)   										OR x0_0.RegCurrentInsurance IN (0) OR x0_0.IFRSCurrent IN (0) OR (x0_0.KeyInstitutionStatus is not null and x0_0.KeyInstitutionStatus not in (0,1))   									)    								)   						)   							THEN '(Historical)'    						ELSE ''   					END    				+ ' : Corporate Profile' AS 'PageTitle' ,   		    'company/profile?id='+ RTRIM(x0_0.KeyInstn) AS 'Url',   		    '/interactivex/snapshot.aspx?id=' + RTRIM(x0_0.KeyInstn) AS 'LegacyUrl',   		    '' AS 'CrawlUrl',   		    'company_' + RTRIM(x0_0.KeyInstn) AS id,   		    x0_0.InstnName AS 'CompanyName',   		    (    					SELECT RTRIM(l.InstnName) + ' ' AS 'text()'    			FROM ObjectViews.dbo.Instn i   						LEFT JOIN ObjectViews..LanguageInstn l WITH (NOLOCK)    							ON l.keyinstn = i.keyinstn   			WHERE x0_0.KeyInstn = i.keyinstn    					FOR XML PATH(''),TYPE   				).value('.[1]', 'nvarchar(max)') AS 'CompanyLangName',   		    x0_0.KeyGeographyTree,   		    x0_7.StateName AS 'State',   		    x0_7.KeyState As 'StateKey',   		    COALESCE (x0_0.City,x0_0.ForeignProvince) AS 'Province',   		    x0_8.CountryShortName AS 'Country',   		    CASE    					WHEN (x0_7.StateName IS NOT NULL)    						THEN x0_7.StateName    					ELSE ''    				END  +   					CASE    						WHEN (x0_8.CountryShortName IS NOT NULL)    							THEN x0_8.CountryShortName    					END    				AS 'StateCountry',   		    x0_8.KeyCountry AS 'CountryKey',   		    (   					SELECT RTRIM(l.KeyForeignLanguage) + ' ' AS 'text()'    					FROM ObjectViews.dbo.Instn i   						LEFT JOIN ObjectViews..LanguageInstn l WITH (NOLOCK)    							ON l.keyinstn = i.keyinstn    					WHERE x0_0.KeyInstn = i.keyinstn    					FOR XML PATH(''),TYPE   				).value('.[1]', 'varchar(max)' ) AS 'CompanyKeyForeignLanguage',   				CASE    					WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'Japan' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   							THEN'Japanese REITS, Japanese REIT, J-REITs, J-REIT, JREIT, JREITs'   					WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'Australia' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   							THEN 'Australian REITS, Australian REIT, A-REITs, A-REIT, AREIT, AREITs'   					WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'United Kingdom' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   							THEN 'UK REITS, UK REIT, UK-REITs, UK-REIT, UKREIT, UKREITs'   					WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'Hong Kong' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   							THEN 'Hong Kong REITS, Hong Kong REIT, HK-REITs, HK-REIT, HKREIT, HKREITs'   					WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'Germany' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1    							THEN 'German REITS, German REIT, G-REITs, G-REIT, GREIT, GREITs'   					WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'France' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1    							THEN 'French REITS, French REIT, SIIC, SIICs'   					WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'Turkey' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1    							THEN 'Turkish REITS, Turkish REIT, REITS, REIT'   					WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'Singapore' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   							THEN 'Singapore REITS, Singapore REIT, S-REITs, S-REIT, SREIT, SREITs'   					WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'Belgium' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   							THEN 'Belgium REITS, Belgium REIT'   					WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'South Africa' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   							THEN 'South African REITS, South African REIT'   					WHEN x0_0.KeyIndustryPrimaryRoot = 13  AND x0_8.CountryShortName = 'USA' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1    							THEN 'US REITS, US REIT, US-REITs, US-REIT, USREIT, USREITs'   					WHEN x0_0.KeyIndustryPrimaryRoot = 13 AND x0_8.CountryShortName = 'Canada' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   							THEN 'Canadian REITS, Canadian REIT'   					WHEN x0_0.KeyIndustryPrimaryRoot IN (13,34) AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1    							THEN 'REITS, REIT'   					ELSE ''   				END AS 'CompanyAlias',   		    x2_0.TradingSymbol AS 'CompanyTradingSymbol',   		    x2_0.TradingSymbolExchange AS 'CompanyTradingSymbolExchange',   		    RTRIM(x6_0.ExhangeShortName) AS 'CompanyExchange',   				x2_0.TradingSymbol + '-' +  RTRIM(x6_0.ExhangeShortName) AS 'CompanyTradingExchangeDisplay',   							RTRIM(x6_0.ExhangeShortName) + ':' + x2_0.TradingSymbol  AS 'CompanyExchangeTradingDisplay',   				STUFF(   						(   							SELECT ',' + RTRIM(D.IndustryShortName)   							FROM ObjectViews.dbo.Instn ii    								JOIN ObjectViews.dbo.InstnMIIndustry c ON ii.KeyInstn = c.KeyInstn   								JOIN ObjectViews.dbo.LookUpMIIndustryTree  D ON c.KeyMIIndustryTree = d.KeyMIIndustryTree   							WHERE x0_0.KeyInstn = ii.keyinstn  and c.KeyIndustryRelationshipLevel in (0) and c.KeyInstnIndustryStatus = 1  ORDER BY D.KeyMIIndustryTree    							FOR XML PATH(''),TYPE   						).value('.[1]', 'nvarchar(max)'), 1, 1, ''   				) AS 'IndustryName',   		    x0_1.GAAPDomainClass AS 'CompanyGAAPDomainClassName',   		    x0_2.RegDomainClass AS 'CompanyRegDomainClassName',   		    x0_3.IndLeadDomainClass AS 'CompanyIndLeadDomainClassName',   		    x0_4.RegDomainClass AS 'CompanyRegDomainClassInsuranceName',   		    x0_5.RegDomainClass AS 'CompanyRegDomainClassEnergyName',   		    x6_7.IndleadDomainClass AS 'CompanyIndLeadDomainClassMedia',   		    x6_8.IFRSDomainClass AS 'CompanyIFRSDomainClass',   				ISNULL(    					NULLIF(   						(    							SELECT DISTINCT RIGHT(REPLICATE('0', 2) + RTRIM(c.KeyIndustry), 2) + ' ' AS 'text()'   							FROM ObjectViews.dbo.Instn ii    							JOIN ObjectViews.dbo.Industry c ON    								(   									(c.MaskGAAPDomainClassCorrect & POWER(2, ii.KeyGAAPDomainClass) > 0   									OR c.MaskRegDomain & POWER(2, ii.KeyRegDomainClass) > 0   									OR c.MaskRegDomain & power(2, ii.KeyRegDomainClassEnergy) > 0   									OR c.MaskRegDomain & power(2, ii.KeyRegDomainClassInsurance) > 0   									OR c.MaskIndleadDomain & power(2, ii.KeyIndLeadDomainClass) > 0   									OR c.MaskIndleadDomain & power(2, ii.KeyIndLeadDomainClassMedia) > 0   									)   									AND c.KeyIndustry NOT IN (17,20,23,19,14,29,12,11,9,33,35)   								)    							WHERE x0_0.KeyInstn = ii.keyinstn FOR XML PATH(''),TYPE   						).value('.[1]', 'varchar(max)'),''   					),'16'    				) + ' 16' AS 'LegacyIndustry',   				ISNULL(    					NULLIF(   							(    								SELECT DISTINCT case when LEN(d.KeyMIIndustryTree) < 2 then '0'+rtrim(D.KeyMIIndustryTree) else rtrim(D.KeyMIIndustryTree) end + '   ' AS 'text()'   					FROM ObjectViews.dbo.Instn ii    								JOIN ObjectViews.dbo.InstnMIIndustry c ON ii.KeyInstn = c.KeyInstn   								JOIN ObjectViews.dbo.LookUpMIIndustryTree  D ON c.KeyMIIndustryTree = d.KeyMIIndustryTree   								WHERE x0_0.KeyInstn = ii.keyinstn  and c.KeyIndustryRelationshipLevel in (0,1)    								FOR XML PATH(''),TYPE   							).value('.[1]', 'varchar(max)'),''   					),'0'    				) + ' 0 ' AS Industry,                                     				x12_0.NAIC as 'NaicCode',   		    x13_0.NAICGroup as 'NaicGroup',   		    x3_0.SwiftBICCode as 'SwiftBicCode',   		    x4_0.LegalEntityID as 'LeiCode',   		    x0_0.KeyInstn as 'CompanySnlKeyInstn',   		    x2_0.CUSIP as 'CompanyCUSIP',   				x2_0.ISIN as 'CompanyISIN',   		    ii.CAFileNumber as 'CAFileNum',   				x5_0.TradingItemID AS 'CompanyTradingItemId',   		    CASE    					WHEN x0_0.DateAcquired IS NULL    						THEN 'Not Acquired'    					ELSE 'Acquired'    				END AS 'AcquiredOrDefunct',   		    CASE    					WHEN x2_0.TradingSymbol IS NULL    						THEN 'Private'    					ELSE 'Public'    				END AS 'PrivateORPublic',   		    CASE    					when x16_0.KeyMIIndustryTree is not null and x0_0.KeyInstitutionStatus not in (3,4) then 'Operating'   					when x16_0.KeyMIIndustryTree is not null and x0_0.KeyInstitutionStatus in (3,4) then 'Historical'   				       when x16_0.KeyMIIndustryTree is null and x0_0.InstnCurrent in (0,1) and (x0_0.RegCurrent IN (0,-1) OR x0_0.RegCurrentEnergy IN (0,-1) OR x0_0.IndLeadCurrentMedia IN (0,-1) OR x0_0.IndLeadCurrent IN (0,-1) OR x0_0.RegCurrentInsurance IN (0,-1) OR x0_0.IFRSCurrent IN (0,-1)) then 'Historical'   					WHEN (     							x0_0.InstnCurrent IN (1) AND    							(    								x0_0.GAAPCurrent IN (1,2) OR    								(   									x0_0.RegCurrent IN (1,2) OR x0_0.RegCurrentEnergy IN (1,2)   									OR x0_0.IndLeadCurrentMedia IN (1,2) OR x0_0.IndLeadCurrent IN (1,2) OR x0_0.RegCurrentInsurance IN (1,2)    									OR x0_0.IFRSCurrent IN (1,2) OR x0_0.KeyInstitutionStatus in (0,1)   								)   							)   					)    						THEN 'Operating'   					WHEN  (     							x0_0.InstnCurrent IN (1) AND    							(    								x0_0.GAAPCurrent IS NULL AND    								(   									x0_0.RegCurrent IS NULL AND x0_0.RegCurrentEnergy IS NULL   									AND x0_0.IndLeadCurrentMedia IS NULL AND x0_0.IndLeadCurrent IS NULL AND x0_0.RegCurrentInsurance IS NULL   									AND x0_0.IFRSCurrent IS NULL    								)   							)   					)    						THEN 'Operating'   					ELSE 'Unknown'    				END as 'OperatingStatus',   		    x7_0.InstnText,   		    x0_0.InstnName41 AS CompanyInstnName41,   		    x0_0.ShortName AS CompanyShortName,   		    x10_0.CIQCompanyID as CIQCompanyID,   		    NULL as SNLGroupName,   		    x0_0.Cert as FDICCertNumber,   		    x0_0.ProductRegID as RegID,   		    x0_0.KeyInstitutionType as 'CompanyType',   		    x11_0.MarketCapFinl,   				x17_0.MarketCapFinls AS 'MarketCapFinlAVGRaw',   				x18_0.MarketCapFinlCurrencyTranslation as 'MarketCapFinlCurrencyTranslation',                      				x5_0.KeyUniversalEntity,   				CASE WHEN (x0_0.updoperation < 2) THEN 'add' WHEN (x0_0.updoperation = 2) THEN 'delete' END AS 'Action',   				'db_all_company' AS Source   				,ii.FinancialHoldingCompany   				, x0_0.KeyInstitutionStatus   							,'0' as IndustryExempt   							,x0_0.KeyInstnParent as 'CompanySnlKeyInstnParent'   							,case when isnull(x0_0.KeyInstnParent,1) = 1 then '0' else '1' end as CompanyHasParent   							, '' as 'CompanyChildKeyInstn'   													, '' as CompanyKeyStatEntityType   			FROM   [ObjectViews].dbo.D_Instn x0_0   				LEFT JOIN [ObjectViews].dbo.GAAPDomainClass x0_1 WITH (NOLOCK)     					ON x0_1.KeySNLDomainClass = x0_0.KeyGAAPDomainClass   				LEFT JOIN [ObjectViews].dbo.LookupRegDomainClass x0_2 WITH (NOLOCK)     					ON x0_2.KeySNLDomainClass = x0_0.KeyRegDomainClass   				LEFT JOIN [ObjectViews].dbo.LookupIndLeadDomainClass x0_3 WITH (NOLOCK)     					ON x0_3.KeySNLDomainClass =x0_0.keyIndLeadDomainClass   				LEFT JOIN [ObjectViews].dbo.LookupRegDomainClass x0_4 WITH (NOLOCK)     					ON x0_4.KeySNLDomainClass =x0_0.KeyRegDomainClassInsurance   				LEFT JOIN [ObjectViews].dbo.LookupRegDomainClass x0_5 WITH (NOLOCK)    					ON x0_5.KeySNLDomainClass = x0_0.KeyRegDomainClassEnergy   				LEFT JOIN [ObjectViews].dbo.LookupIndLeadDomainClass x6_7 WITH (NOLOCK)     					ON x6_7.KeySNLDomainClass =x0_0.KeyIndLeadDomainClassMedia   				LEFT JOIN [ObjectViews].dbo.LookupIFRSDomainClass x6_8 WITH (NOLOCK)     					ON x6_8.KeyIFRSDomainClass = x0_0.KeyIFRSDomainClass   				LEFT JOIN [ObjectViews].dbo.Industry x3_1  WITH (NOLOCK)    					ON x3_1.keyindustry = x0_0.KeyIndustryPrimaryRoot   				LEFT JOIN [ObjectViews].dbo.STATE x0_7  WITH (NOLOCK)    					ON x0_7.KeyState = x0_0.STATE   				LEFT JOIN [ObjectViews].dbo.Country x0_8 WITH (NOLOCK)    					ON x0_8.KeyCountry = x0_0.Country   				LEFT JOIN [ObjectViews].dbo.D_Fndg x2_0 WITH (NOLOCK)    					ON x2_0.keyinstn = x0_0.keyinstn AND (x2_0.PrimaryIssue = 1 OR x2_0.FndgStats = 1) AND x2_0.FndgCurrent = 1 AND x2_0.TradedIssue = 1    					AND x2_0.UpdOperation <2   				LEFT JOIN [ObjectViews].dbo.InstnSwiftBIC x3_0 WITH (NOLOCK)    					ON x3_0.keyinstn = x0_0.keyinstn   				LEFT JOIN [ObjectViews].dbo.CalcsInstnAttribute x4_0 WITH (NOLOCK)    					ON x4_0.keyinstn = x0_0.keyinstn   				LEFT JOIN ObjectViews.dbo.Instn ii WITH (NOLOCK)    					ON ii.KeyInstn = x0_0.KeyInstn   				LEFT JOIN ObjectViews.dbo.D_ProductPriceEntInstrument x5_0 WITH (NOLOCK)    					ON x5_0.KeyInstn = x0_0.KeyInstn and cast(x5_0.keyinstn as varchar(50)) = x5_0.keyuniversalentity                         				LEFT JOIN ObjectViews..LookupExchange x6_0 WITH (NOLOCK)    					ON x2_0.KeyExchange = x6_0.KeyExchange   				LEFT JOIN ObjectViews..InstnText x7_0 WITH (NOLOCK)    					ON x0_0.KeyInstn = x7_0.KeyInstn   				LEFT JOIN ObjectViews.dbo.CapIQCompanyID2Instn x10_0 WITH (NOLOCK)    					ON x0_0.KeyInstn = x10_0.KeyInstn AND x10_0.PrimaryMapping= 1   				LEFT JOIN ObjectViews.dbo.FndgPricingStat x11_0 WITH (NOLOCK)    					ON x2_0.KeyFndg = x11_0.KeyFndg AND x11_0.UseIntradayPricing =0 AND DATEADD(DAY,-1,CONVERT(date,GETDATE())) = x11_0.PricingAsOf   				LEFT JOIN ObjectViews.dbo.InstnInsuranceStatLOB x12_0 WITH (NOLOCK)    					ON x0_0.KeyInstn = x12_0.KeyInstn   				LEFT JOIN ObjectViews.dbo.FinlLenderOrigination x13_0 WITH (NOLOCK)    					ON x0_0.KeyInstn = x13_0.KeyInstn   				LEFT JOIN ObjectViews.dbo.InstnInvestment x15_0 WITH (NOLOCK)   					ON x0_0.KeyInstn = x15_0.KeyInstn   				LEFT JOIN ObjectViews.dbo.D_InstnMIIndustry x16_0 with (nolock)   					On x0_0.KeyInstn = x16_0.KeyInstn   				INNER JOIN #tempCOS x14_0 WITH (NOLOCK)    					ON x0_0.KeyInstn = x14_0.KeyInstn   				CROSS APPLY (   					Select convert(varchar(max),convert(decimal(20,2),ab.MarketCapFinl)) + ' ' as 'text()'    						from [ObjectViews].dbo.Fndg fg    							Left Join ObjectViews.dbo.FndgPricingStat ab with (nolock) On  ab.KeyFndg = fg.KeyFndg AND ab.MarketCapFinl is not null    						where x0_0.KeyInstn = fg.keyinstn  and ab.MarketCapFinl is not null   						FOR XML PATH('')   				) as x17_0(MarketCapFinls)   				CROSS APPLY (   					Select convert(varchar(max),convert(decimal(10,4),(select CurrencyTranslationRate from ObjectViews.dbo.CalcsCurrencyTranslation pct where fg.KeyCurrency = pct.KeyCurrencyFrom and ab.PricingAsOf = pct.CurrencyTranslationAsOf and ab.PricingAsOf = pct.CurrencyTranslationAsOfBegin and pct.KeyCurrency='USD'))) + ' '  as 'text()'    						from [ObjectViews].dbo.Fndg fg    							Left Join ObjectViews.dbo.FndgPricingStat ab with (nolock) On  ab.KeyFndg = fg.KeyFndg AND ab.MarketCapFinl is not null    						where x0_0.KeyInstn = fg.keyinstn  and ab.MarketCapFinl is not null   						FOR XML PATH('')   				) as x18_0(MarketCapFinlCurrencyTranslation)   			WHERE x0_0.KeyInstn BETWEEN ? AND ?      					union all   		SELECT		 x0_0.UpdDate,   				'Company' AS 'EntityType',   				'all, companies, assets, default_collection, imdata, interactive' AS 'Catalogs',   				'Companies' AS 'ContentSet',   				1 AS 'ContentId',   				CASE WHEN x2_0.PrimaryIssue = 1 THEN 'Primary'ELSE '' END AS 'Primary',   				x0_0.InstnName41 +    					CASE    						WHEN x2_0.TradingSymbolExchange IS NOT NULL   							THEN ' (' + RTRIM(x2_0.TradingSymbolExchange) + ')'   							when x16_0.KeyMIIndustryTree is not null and x0_0.KeyInstitutionStatus not in (3,4) then '(Operating)'   							when x16_0.KeyMIIndustryTree is not null and x0_0.KeyInstitutionStatus in (3,4) then '(Historical)'   							when x16_0.KeyMIIndustryTree is null and x0_0.InstnCurrent in (0,1) and (x0_0.RegCurrent IN (0,-1) OR x0_0.RegCurrentEnergy IN (0,-1) OR x0_0.IndLeadCurrentMedia IN (0,-1) OR x0_0.IndLeadCurrent IN (0,-1) OR x0_0.RegCurrentInsurance IN (0,-1) OR x0_0.IFRSCurrent IN (0,-1)) then '(Historical)'   						WHEN (   								x0_0.InstnCurrent IN (1) AND    								(   									x0_0.GAAPCurrent IN (1,2) OR    									(   										x0_0.RegCurrent IN (1,2) OR x0_0.RegCurrentEnergy IN (1,2)   										OR x0_0.IndLeadCurrentMedia IN (1,2) OR x0_0.IndLeadCurrent IN (1,2) OR x0_0.RegCurrentInsurance IN (1,2)   										OR x0_0.IFRSCurrent IN (1,2)  OR x0_0.KeyInstitutionStatus in (0,1)   									)   								)   						)   							THEN '(Operating)'    						WHEN (   								x0_0.InstnCurrent IN (0) AND    								(   									x0_0.GAAPCurrent IN (0) OR    									(   										x0_0.RegCurrent IN (0) OR x0_0.RegCurrentEnergy IN (0)    										OR x0_0.IndLeadCurrentMedia IN (0) OR x0_0.IndLeadCurrent IN (0)   										OR x0_0.RegCurrentInsurance IN (0) OR x0_0.IFRSCurrent IN (0) OR (x0_0.KeyInstitutionStatus is not null and x0_0.KeyInstitutionStatus not in (0,1))   									)    								)   						)   							THEN '(Historical)'    						ELSE ''   					END    				+ ' : Corporate Profile' AS 'PageTitle' ,   		    'company/profile?id='+ RTRIM(x0_0.KeyInstn) AS 'Url',   		    '/interactivex/snapshot.aspx?id=' + RTRIM(x0_0.KeyInstn) AS 'LegacyUrl',   		    '' AS 'CrawlUrl',   		    'company_' + RTRIM(x0_0.KeyInstn) AS id,   		    x0_0.InstnName AS 'CompanyName',   		    (    					SELECT RTRIM(l.InstnName) + ' ' AS 'text()'    			FROM ObjectViews.dbo.Instn i   						LEFT JOIN ObjectViews..LanguageInstn l WITH (NOLOCK)    							ON l.keyinstn = i.keyinstn   			WHERE x0_0.KeyInstn = i.keyinstn    					FOR XML PATH(''),TYPE   				).value('.[1]', 'nvarchar(max)') AS 'CompanyLangName',   		    x0_0.KeyGeographyTree,   		    x0_7.StateName AS 'State',   		    x0_7.KeyState As 'StateKey',   		    COALESCE (x0_0.City,x0_0.ForeignProvince) AS 'Province',   		    x0_8.CountryShortName AS 'Country',   		    CASE    					WHEN (x0_7.StateName IS NOT NULL)    						THEN x0_7.StateName    					ELSE ''    				END  +   					CASE    						WHEN (x0_8.CountryShortName IS NOT NULL)    							THEN x0_8.CountryShortName    					END    				AS 'StateCountry',   		    x0_8.KeyCountry AS 'CountryKey',   		    (   					SELECT RTRIM(l.KeyForeignLanguage) + ' ' AS 'text()'    					FROM ObjectViews.dbo.Instn i   						LEFT JOIN ObjectViews..LanguageInstn l WITH (NOLOCK)    							ON l.keyinstn = i.keyinstn    					WHERE x0_0.KeyInstn = i.keyinstn    					FOR XML PATH(''),TYPE   				).value('.[1]', 'varchar(max)' ) AS 'CompanyKeyForeignLanguage',   				CASE    					WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'Japan' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   							THEN'Japanese REITS, Japanese REIT, J-REITs, J-REIT, JREIT, JREITs'   					WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'Australia' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   							THEN 'Australian REITS, Australian REIT, A-REITs, A-REIT, AREIT, AREITs'   					WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'United Kingdom' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   							THEN 'UK REITS, UK REIT, UK-REITs, UK-REIT, UKREIT, UKREITs'   					WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'Hong Kong' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   							THEN 'Hong Kong REITS, Hong Kong REIT, HK-REITs, HK-REIT, HKREIT, HKREITs'   					WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'Germany' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1    							THEN 'German REITS, German REIT, G-REITs, G-REIT, GREIT, GREITs'   					WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'France' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1    							THEN 'French REITS, French REIT, SIIC, SIICs'   					WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'Turkey' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1    							THEN 'Turkish REITS, Turkish REIT, REITS, REIT'   					WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'Singapore' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   							THEN 'Singapore REITS, Singapore REIT, S-REITs, S-REIT, SREIT, SREITs'   					WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'Belgium' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   							THEN 'Belgium REITS, Belgium REIT'   					WHEN x0_0.KeyIndustryPrimaryRoot = 34 AND x0_8.CountryShortName = 'South Africa' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   							THEN 'South African REITS, South African REIT'   					WHEN x0_0.KeyIndustryPrimaryRoot = 13  AND x0_8.CountryShortName = 'USA' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1    							THEN 'US REITS, US REIT, US-REITs, US-REIT, USREIT, USREITs'   					WHEN x0_0.KeyIndustryPrimaryRoot = 13 AND x0_8.CountryShortName = 'Canada' AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1   							THEN 'Canadian REITS, Canadian REIT'   					WHEN x0_0.KeyIndustryPrimaryRoot IN (13,34) AND x0_0.InstnREIT = 1 AND x0_0.GAAPCurrent = 1    							THEN 'REITS, REIT'   					ELSE ''   				END AS 'CompanyAlias',   		    x2_0.TradingSymbol AS 'CompanyTradingSymbol',   		    x2_0.TradingSymbolExchange AS 'CompanyTradingSymbolExchange',   		    RTRIM(x6_0.ExhangeShortName) AS 'CompanyExchange',   				x2_0.TradingSymbol + '-' +  RTRIM(x6_0.ExhangeShortName) AS 'CompanyTradingExchangeDisplay',   							RTRIM(x6_0.ExhangeShortName) + ':' + x2_0.TradingSymbol  AS 'CompanyExchangeTradingDisplay',   				STUFF(   						(   							SELECT ',' + RTRIM(D.IndustryShortName)   							FROM ObjectViews.dbo.Instn ii    								JOIN ObjectViews.dbo.InstnMIIndustry c ON ii.KeyInstn = c.KeyInstn   								JOIN ObjectViews.dbo.LookUpMIIndustryTree  D ON c.KeyMIIndustryTree = d.KeyMIIndustryTree   							WHERE x0_0.KeyInstn = ii.keyinstn  and c.KeyIndustryRelationshipLevel in (0) and c.KeyInstnIndustryStatus = 1  ORDER BY D.KeyMIIndustryTree    							FOR XML PATH(''),TYPE   						).value('.[1]', 'nvarchar(max)'), 1, 1, ''   				) AS 'IndustryName',   		    x0_1.GAAPDomainClass AS 'CompanyGAAPDomainClassName',   		    x0_2.RegDomainClass AS 'CompanyRegDomainClassName',   		    x0_3.IndLeadDomainClass AS 'CompanyIndLeadDomainClassName',   		    x0_4.RegDomainClass AS 'CompanyRegDomainClassInsuranceName',   		    x0_5.RegDomainClass AS 'CompanyRegDomainClassEnergyName',   		    x6_7.IndleadDomainClass AS 'CompanyIndLeadDomainClassMedia',   		    x6_8.IFRSDomainClass AS 'CompanyIFRSDomainClass',   				ISNULL(    					NULLIF(   						(    							SELECT DISTINCT RIGHT(REPLICATE('0', 2) + RTRIM(c.KeyIndustry), 2) + ' ' AS 'text()'   							FROM ObjectViews.dbo.Instn ii    							JOIN ObjectViews.dbo.Industry c ON    								(   									(c.MaskGAAPDomainClassCorrect & POWER(2, ii.KeyGAAPDomainClass) > 0   									OR c.MaskRegDomain & POWER(2, ii.KeyRegDomainClass) > 0   									OR c.MaskRegDomain & power(2, ii.KeyRegDomainClassEnergy) > 0   									OR c.MaskRegDomain & power(2, ii.KeyRegDomainClassInsurance) > 0   									OR c.MaskIndleadDomain & power(2, ii.KeyIndLeadDomainClass) > 0   									OR c.MaskIndleadDomain & power(2, ii.KeyIndLeadDomainClassMedia) > 0   									)   									AND c.KeyIndustry NOT IN (17,20,23,19,14,29,12,11,9,33,35)   								)    							WHERE x0_0.KeyInstn = ii.keyinstn FOR XML PATH(''),TYPE   						).value('.[1]', 'varchar(max)'),''   					),'16'    				) + ' 16' AS 'LegacyIndustry',   				ISNULL(    					NULLIF(   							(    								SELECT DISTINCT case when LEN(d.KeyMIIndustryTree) < 2 then '0'+rtrim(D.KeyMIIndustryTree) else rtrim(D.KeyMIIndustryTree) end + '   ' AS 'text()'   					FROM ObjectViews.dbo.Instn ii    								JOIN ObjectViews.dbo.InstnMIIndustry c ON ii.KeyInstn = c.KeyInstn   								JOIN ObjectViews.dbo.LookUpMIIndustryTree  D ON c.KeyMIIndustryTree = d.KeyMIIndustryTree   								WHERE x0_0.KeyInstn = ii.keyinstn  and c.KeyIndustryRelationshipLevel in (0,1)    								FOR XML PATH(''),TYPE   							).value('.[1]', 'varchar(max)'),''   					),'0'    				) + ' 0 ' AS Industry,                                     				x12_0.NAIC as 'NaicCode',   		    x13_0.NAICGroup as 'NaicGroup',   		    x3_0.SwiftBICCode as 'SwiftBicCode',   		    x4_0.LegalEntityID as 'LeiCode',   		    x0_0.KeyInstn as 'CompanySnlKeyInstn',   		    x2_0.CUSIP as 'CompanyCUSIP',   				x2_0.ISIN as 'CompanyISIN',   		    ii.CAFileNumber as 'CAFileNum',   				x5_0.TradingItemID AS 'CompanyTradingItemId',   		    CASE    					WHEN x0_0.DateAcquired IS NULL    						THEN 'Not Acquired'    					ELSE 'Acquired'    				END AS 'AcquiredOrDefunct',   		    CASE    					WHEN x2_0.TradingSymbol IS NULL    						THEN 'Private'    					ELSE 'Public'    				END AS 'PrivateORPublic',   		    CASE    					when x16_0.KeyMIIndustryTree is not null and x0_0.KeyInstitutionStatus not in (3,4) then 'Operating'   					when x16_0.KeyMIIndustryTree is not null and x0_0.KeyInstitutionStatus in (3,4) then 'Historical'   					when x16_0.KeyMIIndustryTree is null and x0_0.InstnCurrent in (0,1) and (x0_0.RegCurrent IN (0,-1) OR x0_0.RegCurrentEnergy IN (0,-1) OR x0_0.IndLeadCurrentMedia IN (0,-1) OR x0_0.IndLeadCurrent IN (0,-1) OR x0_0.RegCurrentInsurance IN (0,-1) OR x0_0.IFRSCurrent IN (0,-1)) then 'Historical'   					WHEN (     							x0_0.InstnCurrent IN (1) AND    							(    								x0_0.GAAPCurrent IN (1,2) OR    								(   									x0_0.RegCurrent IN (1,2) OR x0_0.RegCurrentEnergy IN (1,2)   									OR x0_0.IndLeadCurrentMedia IN (1,2) OR x0_0.IndLeadCurrent IN (1,2) OR x0_0.RegCurrentInsurance IN (1,2)    									OR x0_0.IFRSCurrent IN (1,2) OR x0_0.KeyInstitutionStatus in (0,1)   								)   							)   					)    						THEN 'Operating'   					WHEN  (     							x0_0.InstnCurrent IN (1) AND    							(    								x0_0.GAAPCurrent IS NULL AND    								(   									x0_0.RegCurrent IS NULL AND x0_0.RegCurrentEnergy IS NULL   									AND x0_0.IndLeadCurrentMedia IS NULL AND x0_0.IndLeadCurrent IS NULL AND x0_0.RegCurrentInsurance IS NULL   									AND x0_0.IFRSCurrent IS NULL    								)   							)   					)    						THEN 'Operating'   					ELSE 'Unknown'    				END as 'OperatingStatus',   							x7_0.InstnText,   							x0_0.InstnName41 AS CompanyInstnName41,   							x0_0.ShortName AS CompanyShortName,   							x10_0.CIQCompanyID as CIQCompanyID,   							NULL as SNLGroupName,   							x0_0.Cert as FDICCertNumber,   							x0_0.ProductRegID as RegID,   							x0_0.KeyInstitutionType as 'CompanyType',   							x11_0.MarketCapFinl,   				x17_0.MarketCapFinls AS 'MarketCapFinlAVGRaw',   				x18_0.MarketCapFinlCurrencyTranslation as 'MarketCapFinlCurrencyTranslation',                      				x5_0.KeyUniversalEntity,   				CASE WHEN (x0_0.updoperation < 2) THEN 'add' WHEN (x0_0.updoperation = 2) THEN 'delete' END AS 'Action',   				'db_all_company' AS Source   				,ii.FinancialHoldingCompany   				, x0_0.KeyInstitutionStatus   							,'1' as 'IndustryExempt'   							,x0_0.KeyInstnParent as 'CompanySnlKeyInstnParent'   							,case when isnull(x0_0.KeyInstnParent,1) = 1 then '0' else '1' end as CompanyHasParent   							, '' as 'CompanyChildKeyInstn'   													, '' as CompanyKeyStatEntityType   			FROM   [ObjectViews].dbo.D_Instn x0_0   				LEFT JOIN [ObjectViews].dbo.GAAPDomainClass x0_1 WITH (NOLOCK)     					ON x0_1.KeySNLDomainClass = x0_0.KeyGAAPDomainClass   				LEFT JOIN [ObjectViews].dbo.LookupRegDomainClass x0_2 WITH (NOLOCK)     					ON x0_2.KeySNLDomainClass = x0_0.KeyRegDomainClass   				LEFT JOIN [ObjectViews].dbo.LookupIndLeadDomainClass x0_3 WITH (NOLOCK)     					ON x0_3.KeySNLDomainClass =x0_0.keyIndLeadDomainClass   				LEFT JOIN [ObjectViews].dbo.LookupRegDomainClass x0_4 WITH (NOLOCK)     					ON x0_4.KeySNLDomainClass =x0_0.KeyRegDomainClassInsurance   				LEFT JOIN [ObjectViews].dbo.LookupRegDomainClass x0_5 WITH (NOLOCK)    					ON x0_5.KeySNLDomainClass = x0_0.KeyRegDomainClassEnergy   				LEFT JOIN [ObjectViews].dbo.LookupIndLeadDomainClass x6_7 WITH (NOLOCK)     					ON x6_7.KeySNLDomainClass =x0_0.KeyIndLeadDomainClassMedia   				LEFT JOIN [ObjectViews].dbo.LookupIFRSDomainClass x6_8 WITH (NOLOCK)     					ON x6_8.KeyIFRSDomainClass = x0_0.KeyIFRSDomainClass   				LEFT JOIN [ObjectViews].dbo.Industry x3_1  WITH (NOLOCK)    					ON x3_1.keyindustry = x0_0.KeyIndustryPrimaryRoot   				LEFT JOIN [ObjectViews].dbo.STATE x0_7  WITH (NOLOCK)    					ON x0_7.KeyState = x0_0.STATE   				LEFT JOIN [ObjectViews].dbo.Country x0_8 WITH (NOLOCK)    					ON x0_8.KeyCountry = x0_0.Country   				LEFT JOIN [ObjectViews].dbo.D_Fndg x2_0 WITH (NOLOCK)    					ON x2_0.keyinstn = x0_0.keyinstn AND (x2_0.PrimaryIssue = 1 OR x2_0.FndgStats = 1) AND x2_0.FndgCurrent = 1 AND x2_0.TradedIssue = 1    					AND x2_0.UpdOperation <2    				LEFT JOIN [ObjectViews].dbo.InstnSwiftBIC x3_0 WITH (NOLOCK)    					ON x3_0.keyinstn = x0_0.keyinstn   				LEFT JOIN [ObjectViews].dbo.CalcsInstnAttribute x4_0 WITH (NOLOCK)    					ON x4_0.keyinstn = x0_0.keyinstn   				LEFT JOIN ObjectViews.dbo.Instn ii WITH (NOLOCK)    					ON ii.KeyInstn = x0_0.KeyInstn   				LEFT JOIN ObjectViews.dbo.D_ProductPriceEntInstrument x5_0 WITH (NOLOCK)    					ON x5_0.KeyInstn = x0_0.KeyInstn and cast(x5_0.keyinstn as varchar(50)) = x5_0.keyuniversalentity                          				LEFT JOIN ObjectViews..LookupExchange x6_0 WITH (NOLOCK)    					ON x2_0.KeyExchange = x6_0.KeyExchange   				LEFT JOIN ObjectViews..InstnText x7_0 WITH (NOLOCK)    					ON x0_0.KeyInstn = x7_0.KeyInstn   				LEFT JOIN ObjectViews.dbo.CapIQCompanyID2Instn x10_0 WITH (NOLOCK)    					ON x0_0.KeyInstn = x10_0.KeyInstn AND x10_0.PrimaryMapping= 1   				LEFT JOIN ObjectViews.dbo.FndgPricingStat x11_0 WITH (NOLOCK)    					ON x2_0.KeyFndg = x11_0.KeyFndg AND x11_0.UseIntradayPricing =0 AND DATEADD(DAY,-1,CONVERT(date,GETDATE())) = x11_0.PricingAsOf   				LEFT JOIN ObjectViews.dbo.InstnInsuranceStatLOB x12_0 WITH (NOLOCK)    					ON x0_0.KeyInstn = x12_0.KeyInstn   				LEFT JOIN ObjectViews.dbo.FinlLenderOrigination x13_0 WITH (NOLOCK)    					ON x0_0.KeyInstn = x13_0.KeyInstn   				LEFT JOIN ObjectViews.dbo.InstnInvestment x15_0 WITH (NOLOCK)   					ON x0_0.KeyInstn = x15_0.KeyInstn   				LEFT JOIN ObjectViews.dbo.D_InstnMIIndustry x16_0 with (nolock)   					On x0_0.KeyInstn = x16_0.KeyInstn   				INNER JOIN #tempMM x14_0 WITH (NOLOCK)    					ON x0_0.KeyInstn = x14_0.KeyInstn   				CROSS APPLY (   					Select convert(varchar(max),convert(decimal(20,2),ab.MarketCapFinl)) + ' ' as 'text()'    						from [ObjectViews].dbo.Fndg fg    							Left Join ObjectViews.dbo.FndgPricingStat ab with (nolock) On  ab.KeyFndg = fg.KeyFndg AND ab.MarketCapFinl is not null    						where x0_0.KeyInstn = fg.keyinstn  and ab.MarketCapFinl is not null   						FOR XML PATH('')   				) as x17_0(MarketCapFinls)   				CROSS APPLY (   					Select convert(varchar(max),convert(decimal(10,4),(select CurrencyTranslationRate from ObjectViews.dbo.CalcsCurrencyTranslation pct where fg.KeyCurrency = pct.KeyCurrencyFrom and ab.PricingAsOf = pct.CurrencyTranslationAsOf and ab.PricingAsOf = pct.CurrencyTranslationAsOfBegin and pct.KeyCurrency='USD'))) + ' '  as 'text()'    						from [ObjectViews].dbo.Fndg fg    							Left Join ObjectViews.dbo.FndgPricingStat ab with (nolock) On  ab.KeyFndg = fg.KeyFndg AND ab.MarketCapFinl is not null    						where x0_0.KeyInstn = fg.keyinstn  and ab.MarketCapFinl is not null   						FOR XML PATH('')   				) as x18_0(MarketCapFinlCurrencyTranslation)   			WHERE x0_0.KeyInstn BETWEEN ? AND ?   	) x   		left join ObjectViews.dbo.Instn x0_0 with (nolock) on x.CompanySnlKeyInstn = x0_0.KeyInstn   		LEFT JOIN ObjectViews.dbo.InstnMIIndustry x16_0 with (nolock) On x0_0.KeyInstn = x16_0.KeyInstn   		left join #CompanySponsorBacked x99_0 on x0_0.KeyInstn = x99_0.KeyInstn   	where   		x.IndustryExempt = 1 OR   				((x0_0.InstnFake = 0 or x0_0.InstnFake is null) AND   					((x16_0.KeyMIIndustryTree is not null and x0_0.KeyInstitutionStatus is not null)   							OR   							(x16_0.KeyMIIndustryTree is null and x0_0.InstnCurrent IN (0,1) AND   					((    									(x0_0.GAAPCurrent IN (0,1) OR x0_0.RegCurrent IN (0,1)    									OR x0_0.IndLeadCurrent IN (0,1) OR x0_0.IndLeadCurrentMedia IN (0,1)   						OR x0_0.RegCurrentEnergy IN (0,1) OR x0_0.RegCurrentInsurance IN (0,1)    									OR x0_0.IFRSCurrent IN (0,1))   									AND x0_0.KeyGAAPDomainClass not in (11,29,30)   							)   							OR   							(   									x0_0.GAAPCurrent IN (0,1) AND    											(x0_0.RegCurrent in (0,1)   													OR x0_0.IndLeadCurrent not IN (0,1) OR x0_0.IndLeadCurrentMedia IN (0,1)   													OR x0_0.RegCurrentEnergy IN (0,1) OR x0_0.RegCurrentInsurance IN (0,1)    													OR x0_0.IFRSCurrent IN (0,1))    									AND x0_0.KeyGAAPDomainClass in (11,29,30)   							)))))   				and x0_0.KeyInstitutionType not in (14, 15)    	ORDER BY x.UpdDate OFFSET ? ROWS FETCH NEXT ? ROWS ONLY      	DROP TABLE #tempCOS, #CompanySponsorBacked   	DROP TABLE #tempMM, #CompanyChildren   
company.solrCollection=mi-search-all


company.count.Query=select count(1) from [ObjectViews].dbo.D_Instn

company.subRange.Query=SELECT * FROM (   SELECT     ROW_NUMBER() OVER (ORDER BY keyinstn  ASC) AS rowNumber, 	KeyInstn      from [ObjectViews].dbo.D_Instn  )  as temptablename WHERE rownumber IN (<INDEX_LISTING>) order by rowNumber asc

company.subRange.Fields=rowNumber,KeyInstn

company.subRange.FieldName=KeyInstn

company.marketCap=Y

company.subQueries.count=4

company.marketCapRule=Y@MarketCapFinlAVGRaw@MarketCapFinlCurrencyTranslation@ @MarketCapFinlAVG

company.fields=UpdDate,EntityType,Catalogs,ContentSet,ContentId,Primary,PageTitle,Url,LegacyUrl,CrawlUrl,id,CompanyName,CompanyLangName,KeyGeographyTree,State,StateKey,Province,Country,StateCountry,CountryKey,CompanyKeyForeignLanguage,CompanyAlias,CompanyTradingSymbol,CompanyTradingSymbolExchange,CompanyExchange,CompanyTradingExchangeDisplay,CompanyExchangeTradingDisplay,IndustryName,CompanyGAAPDomainClassName,CompanyRegDomainClassName,CompanyIndLeadDomainClassName,CompanyRegDomainClassInsuranceName,CompanyRegDomainClassEnergyName,CompanyIndLeadDomainClassMedia,CompanyIFRSDomainClass,LegacyIndustry,Industry,NaicCode,NaicGroup,SwiftBicCode,LeiCode,CompanySnlKeyInstn,CompanyCUSIP,CompanyISIN,CAFileNum,CompanyTradingItemId,AcquiredOrDefunct,PrivateORPublic,OperatingStatus,InstnText,CompanyInstnName41,CompanyShortName,CIQCompanyID,SNLGroupName,FDICCertNumber,RegID,CompanyType,MarketCapFinl,MarketCapFinlAVGRaw,MarketCapFinlCurrencyTranslation,KeyUniversalEntity,Action,Source,FinancialHoldingCompany,KeyInstitutionStatus,IndustryExempt,CompanySnlKeyInstnParent,CompanyHasParent,CompanyChildKeyInstn,CompanyKeyStatEntityType,CompanySponsorBacked,_lw_data_source_s,_lw_data_source_collection_s
